# üí¨ Real-time Streaming Comment Analysis System
## üåü Project Overview

This project aims to build a robust system for efficiently collecting, storing, and analyzing comment data generated in high-volume real-time streaming environments. It is designed to handle thousands of comments per second, provide instant feedback through real-time analysis, and generate summarized insights from the overall comment flow.

## ‚ú® Key Features

* **Real-time Comment Ingestion & Storage**: Reliably ingests and durably stores high-volume comment traffic without data loss.
* **Real-time Comment Analysis**: Provides instant analysis results for individual comments (e.g., profanity detection, sentiment analysis, keyword extraction).
* **Periodic Comment Summarization**: Generates comprehensive summaries of comment trends over specific periods (e.g., hourly, daily).
* **Distributed & Scalable Architecture**: All components are designed for distributed environments, allowing flexible scaling to meet increased traffic demands.
* **Kubernetes-based Deployment**: All services are containerized and managed within a Kubernetes cluster for easy deployment and orchestration.

## üöÄ System Architecture
<img width="1733" height="933" alt="image" src="https://github.com/user-attachments/assets/140b61c4-3800-47b4-842e-60c2a6263bf4" />

* **user-server**:
    * **User Management**: Handles user login, registration, and authentication using JWTs.
    * **API Endpoints**: Provides APIs for streaming lists (dashboard data), user profiles, and other core application functionalities.
    * **Real-time Updates**: Receives real-time updates via SSE (Server-Sent Events) from Redis and also fetches summarized data.
* **chat-server**:
    * Handles real-time chat messages, communicating with users via WebSockets.
    * Sends incoming comments to Kafka's `raw-chats` topic.
    * Subscribes to Kafka's `analysis-result topic` for real-time analysis results to display to chat participants.
* **Kafka**:
    * `raw-chats topic`: All raw, original comment data received from chat servers is published here. It acts as the central hub for the data stream.
    * `analysis-result topic`: Real-time analysis results from Flink are published here. `chat-server` instances subscribe to this topic (with unique consumer group IDs) to broadcast updates to users.
* **Apache Flink (Real-time Analysis)**:
    * Consumes comment data from the `raw-chats` topic in real-time, performing immediate analysis (e.g., profanity detection, sentiment analysis, keyword extraction).
    * Publishes the analysis results to the `analysis-result topic` for real-time delivery to users.
* **Cassandra**:
    * A distributed NoSQL database that durably stores all raw comment data from the `raw-chats` topic. Optimized for high-volume write operations.
* **Apache Spark (Batch Analysis)**:
    * Periodically reads large volumes of historical comment data from Cassandra to perform complex batch analysis (e.g., summarizing overall comment trends, topic modeling).
    * Stores the resulting summarized text into Redis.
* **Redis**:
    * `stream-updates channel`: `user-server` instances subscribe to this channel and use SSE to update dashboards(e.g. current user count) in real-time.
    * **Summarized Text Storage**: Stores the summarized text generated by Spark. `user-server` queries this directly when summary information is requested.
    * **Refresh Token Storage**: Securely stores refresh tokens, enabling refresh token rotation for enhanced user authentication security. This ensures that refresh tokens are single-use and invalidated after each use.
* **MySQL**:
    * Stores structured data such as user profiles, stream data, or other relational data required for the application. Accessed by `user-server`.
* **Kubernetes (Pods)**: All `user-server` and `chat-server` instances, along with data infrastructure components (Kafka, Flink, Spark, Cassandra, Redis, MySQL), are deployed and managed as Pods within a Kubernetes cluster.

## üõ†Ô∏è Technology Stack

* **Frontend**: Vue.js
* **Backend**: Spring Boot (for `user-server`, `chat-server` implementation)
* **Real-time Messaging**: Apache Kafka
* **Stream Processing**: Apache Flink
* **Distributed Batch Processing**: Apache Spark
* **NoSQL Database**: Apache Cassandra
* **In-memory Data Store/Caching**: Redis
* **Relational Database**: MySQL
* **Container Orchestration**: Kubernetes

## üìÑ License

This project is licensed under the MIT License. See the `LICENSE` file for more details.
